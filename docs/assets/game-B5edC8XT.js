import"./modulepreload-polyfill-B5Qt9EMX.js";const u=document.getElementById("btn1"),g=document.getElementById("btn2"),y=document.getElementById("btn3"),p=document.getElementById("btn4"),I=154,b=145,w=170,k=204;let r=0;const E=new Audio("/music-game/se/se1.mp3");document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("countdown"),t=document.getElementById("start-message");function s(m){return new URLSearchParams(window.location.search).get(m)}const n=s("song");switch(n){case"senbon.mp3":r=I;break;case"syaruru.mp3":r=b;break;case"bisyouzyo.mp3":r=w;break;case"over.mp3":r=k;break;default:throw new Error("No song selected")}const c=new Audio("/music-game/music/"+n);let d=3;const a=setInterval(()=>{d--,e.textContent=String(d),d<=0&&(clearInterval(a),e.style.display="none",t.style.display="block",setTimeout(()=>{t.style.display="none",c.currentTime=1,c.play();const m=document.getElementById("lane1"),i=document.getElementById("lane2"),o=document.getElementById("lane3"),h=document.getElementById("lane4"),f=[m,i,o,h];setInterval(()=>{let v=Math.floor(Math.random()*f.length);C(f[v]),c.addEventListener("ended",B)},6e4/r)},1e3))},1e3)});function B(){clearInterval(6e4/r)}if(!u||!g||!y||!p)throw new Error("ボタンの要素が存在しない");const L=[];function C(e){L.push({lane:Math.floor(Math.random()*4),height:0});const t=document.createElement("div");t.classList.add("note"),e.appendChild(t);let s=0;const n=setInterval(()=>{s+=1,t.style.top=s+"px",s>window.innerHeight&&(clearInterval(n),t.parentElement===e&&e.removeChild(t))},2);t.dataset.intervalId=String(n)}function _(e,t){const s=(e.width+e.left)/2,n=(e.height+e.top)/2,c=(t.width+t.left)/2,d=(t.height+t.top)/2;return M(s,n,c,d)}function M(e,t,s,n){return Math.sqrt((s-e)**2+(n-t)**2)}function l(e){const t=document.querySelectorAll(".note"),s=e.getBoundingClientRect();let n=!1;return E.currentTime=0,E.play(),t.forEach(c=>{const d=c.getBoundingClientRect();let a=_(d,s);const m="images-container"+e.id.replace("btn",""),i=document.getElementById(m),o=document.createElement("img");if(o.style.width="50px",o.style.height="50px",o.alt="当たり判定",console.log(a),a<11){const h=c.dataset.intervalId;c.remove(),clearInterval(Number(h)),console.log(e.id),a<=2?o.src="/music-game/images/perfect.png":a<=4?o.src="/music-game/images/great.png":a<=7?o.src="/music-game/images/good.png":a<=10&&(o.src="/music-game/images/bad.png"),i==null||i.appendChild(o),setTimeout(()=>i==null?void 0:i.removeChild(o),500),n=!0}}),n}u.addEventListener("click",()=>l(u));g.addEventListener("click",()=>l(g));y.addEventListener("click",()=>l(y));p.addEventListener("click",()=>l(p));const x=e=>{e.key==="d"||e.key==="1"?l(u):e.key==="f"||e.key==="2"?l(g):e.key==="j"||e.key==="3"?l(y):(e.key==="k"||e.key==="4")&&l(p)};window.addEventListener("keydown",x);
