(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function s(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(t){if(t.ep)return;t.ep=!0;const o=s(t);fetch(t.href,o)}})();const a=document.getElementById("btn1"),m=document.getElementById("btn2"),u=document.getElementById("btn3"),f=document.getElementById("btn4"),y=new Audio("/music/senbon.mp3"),E=154,h=6e4/E,p=new Audio("/se/se1.mp3");document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("countdown"),n=document.getElementById("start-message");let s=3;const c=setInterval(()=>{s--,e.textContent=String(s),s<=0&&(clearInterval(c),e.style.display="none",n.style.display="block",setTimeout(()=>{n.style.display="none",y.currentTime=1,y.play();const t=document.getElementById("lane1"),o=document.getElementById("lane2"),i=document.getElementById("lane3"),g=document.getElementById("lane4"),l=[t,o,i,g];setInterval(()=>{let r=Math.floor(Math.random()*l.length);b(l[r]),y.addEventListener("ended",I)},h)},1e3))},1e3)});function I(){clearInterval(h)}if(!a||!m||!u||!f)throw new Error("ボタンの要素が存在しない");const w=[];function b(e){w.push({lane:Math.floor(Math.random()*4),height:0});const n=document.createElement("div");n.classList.add("note"),e.appendChild(n);let s=0;const c=setInterval(()=>{s+=1,n.style.top=s+"px",s>window.innerHeight&&(clearInterval(c),n.parentElement===e&&e.removeChild(n))},2);n.dataset.intervalId=String(c)}function L(e,n){const s=(e.width+e.left)/2,c=(e.height+e.top)/2,t=(n.width+n.left)/2,o=(n.height+n.top)/2;return B(s,c,t,o)}function B(e,n,s,c){return Math.sqrt((s-e)**2+(c-n)**2)}function d(e){const n=document.querySelectorAll(".note"),s=e.getBoundingClientRect();let c=!1;return p.currentTime=0,p.play(),n.forEach(t=>{const o=t.getBoundingClientRect();let i=L(o,s);const g="images-container"+e.id.replace("btn",""),l=document.getElementById(g),r=document.createElement("img");if(r.style.width="50px",r.style.height="50px",r.alt="当たり判定",console.log(i),i<11){const v=t.dataset.intervalId;t.remove(),clearInterval(Number(v)),console.log(e.id),i<=2?r.src="./images/perfect.png":i<=4?r.src="./images/great.png":i<=7?r.src="./images/good.png":i<=10&&(r.src="./images/bad.png"),l==null||l.appendChild(r),setTimeout(()=>l==null?void 0:l.removeChild(r),500),c=!0}}),c}a.addEventListener("click",()=>d(a));m.addEventListener("click",()=>d(m));u.addEventListener("click",()=>d(u));f.addEventListener("click",()=>d(f));const k=e=>{e.key==="d"||e.key==="1"?d(a):e.key==="f"||e.key==="2"?d(m):e.key==="j"||e.key==="3"?d(u):(e.key==="k"||e.key==="4")&&d(f)};window.addEventListener("keydown",k);
